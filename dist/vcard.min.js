!function(t){function e(t){this.properties={},Object.keys(t).forEach(function(e){this.properties[e]=t[e]}.bind(this))}e.prototype.getCard=function(){var t="BEGIN:VCARD",e="END:VCARD",r=[];r.push(t);for(var i in this.properties)"string"==typeof this.properties[i]?r.push(i.toUpperCase()+":"+this.properties[i]):this.properties[i].forEach(function(t){var e=[];for(var o in t.meta)e.push(o.toUpperCase()+"="+t.meta[o].toUpperCase());r.push(i.toUpperCase()+";"+e.join(";")+":"+t.value.join(";"))});return r.push(e),r.join("\n").trim()},e.parse=function(t,r){var i=/^(version|fn|title|org|nickname|note|uid|n|rev|prodid):(.+)$/i,o=/^([^:;]+);([^:]+):(.+)$/,n=/item\d{1,2}\./,p={};return t.split(/\r\n|\r|\n/).forEach(function(t){var e,r;if(i.test(t))e=t.match(i),r=e[1].toLowerCase().trim(),p[r]=e[2];else if(o.test(t)){e=t.match(o),r=e[1].replace(n,"").toLowerCase().trim();var s={};e[2].split(";").map(function(t,e){var r=t.match(/([a-z\-]+)=(.*)/i);return r?[r[1],r[2]]:["TYPE"+(0===e?"":e),t]}).forEach(function(t){s[t[0].toLowerCase()]=t[1].toLowerCase()}),p[r]||(p[r]=[]),p[r].push({meta:s,value:e[3].split(";")})}}),new e(p,r)},t.VCard=e}("undefined"!=typeof window?window:module.exports);