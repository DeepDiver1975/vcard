!function(t){function e(t){Object.keys(t).forEach(function(e){this[e]=t[e]}.bind(this))}e.prototype.getCard=function(){var t="BEGIN:VCARD",e="END:VCARD",n=[];n.push(t);for(var o in this)"string"==typeof this[o]?n.push(o.toUpperCase()+":"+this[o]):"function"!=typeof this[o]&&this[o].forEach(function(t){var e=[];for(var r in t.meta)e.push(r.toUpperCase()+"="+t.meta[r].toUpperCase());n.push(o.toUpperCase()+";"+e.join(";")+":"+t.value.join(";"))});return n.push(e),n.join("\n").trim()},e.parse=function(t,n){var o=/^(version|fn|title|org|nickname|note|uid|n|rev|prodid):(.+)$/i,r=/^([^:;]+);([^:]+):(.+)$/,i=/item\d{1,2}\./,a={};return t.split(/\r\n|\r|\n/).forEach(function(t){var e,n;if(o.test(t))e=t.match(o),n=e[1].toLowerCase().trim(),a[n]=e[2];else if(r.test(t)){e=t.match(r),n=e[1].replace(i,"").toLowerCase().trim();var s={};e[2].split(";").map(function(t,e){var n=t.match(/([a-z\-]+)=(.*)/i);return n?[n[1],n[2]]:["TYPE"+(0===e?"":e),t]}).forEach(function(t){s[t[0].toLowerCase()]=t[1].toLowerCase()}),a[n]||(a[n]=[]),a[n].push({meta:s,value:e[3].split(";")})}}),new e(a,n)},t.VCard=e}("undefined"!=typeof window?window:module.exports);