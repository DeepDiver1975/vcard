!function(t){function e(t){Object.keys(t).forEach(function(e){this[e]=t[e]}.bind(this))}e.prototype.getCard=function(){var t="BEGIN:VCARD",e="END:VCARD",n=[];n.push(t);for(var i in this)"string"==typeof this[i]?n.push(i.toUpperCase()+":"+this[i]):"function"!=typeof this[i]&&this[i].forEach(function(t){var e=[];for(var o in t.meta)e.push(o.toUpperCase()+"="+t.meta[o].toUpperCase());n.push(i.toUpperCase()+";"+e.join(";")+":"+t.value.join(";"))});return n.push(e),n.join("\n").trim()},e.parse=function(t,n){var i=/^(version|fn|title|org|nickname|note|uid|n|rev|prodid):(.+)$/i,o=/^([^:;]+);([^:]+):(.+)$/,r=/item\d{1,2}\./,a={},s=null;return t.split(/\r\n|\r|\n/).forEach(function(t){var e,n;if(i.test(t))e=t.match(i),n=e[1].toLowerCase().trim(),a[n]=e[2],s=null;else if(o.test(t)){e=t.match(o),n=e[1].replace(r,"").toLowerCase().trim();var p={};e[2].split(";").map(function(t,e){var n=t.match(/([a-z\-]+)=(.*)/i);return n?[n[1],n[2]]:["TYPE"+(0===e?"":e),t]}).forEach(function(t){p[t[0].toLowerCase()]=t[1].toLowerCase()}),a[n]||(a[n]=[]),a[n].push({meta:p,value:e[3].split(";")}),s={key:n,index:a[n].length-1}}else s&&"photo"==s.key&&"END:VCARD"!=t&&(a[s.key][s.index].value+=t.trim())}),new e(a,n)},t.VCard=e}("undefined"!=typeof window?window:module.exports);