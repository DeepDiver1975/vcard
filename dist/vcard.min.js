!function(e){function t(e){for(var t,n,o,i,u,s={},f=e.split(/\r\n|\r|\n/),c=f.length,p=0;c>p;p++)if(""!=f[p]&&f[p].toUpperCase()!=r&&f[p].toUpperCase()!=a){t=f[p].split(":"),n=t[0],o=t[1],u=!1,i={};var h=function(e){return c>e+1&&(" "==f[e+1][0]||"	"==f[e+1][0])};if(h(p))for(;h(p);)o+=f[p+1].trim(),p++;if(n.match(/;/)){var l=n.split(";");n=l.shift(),l.forEach(function(e){var t=e.split("=");t[0]=t[0].toLowerCase(),i[t[0]]?i[t[0]].push(t[1]):i[t[0]]=[t[1]]})}if(o.match(/;/)&&(o=o.split(";")),n.match(/\./)){var v=n.split(".");n=v[1],u=v[0]}var m={value:o};Object.keys(i).length&&(m.meta=i),u&&(m.namespace=u),n=n.toLowerCase(),"undefined"==typeof s[n]?s[n]=[m]:s[n].push(m)}return s}function n(e,t){var n=[r],i="";return t&&!e.version&&(e.version=[{value:"3.0"}]),t&&!e.uid&&(e.uid=[{value:o()}]),Object.keys(e).forEach(function(t){e[t].forEach(function(e){if(i="",e.namespace&&(i+=e.namespace+"."),i+=t.toUpperCase(),e.meta&&Object.keys(e.meta).forEach(function(t){e.meta[t].forEach(function(e){i+=";"+t.toUpperCase()+"="+e})}),i+=":",i+="string"==typeof e.value?e.value:e.value.join(";"),i.length>75){var r=i.substr(0,75),a=i.substr(75),o=a.match(/.{1,74}/g);n.push(r),o.forEach(function(e){n.push(" "+e)})}else n.push(i)})}),n.push(a),n.join("\r\n")}var r="BEGIN:VCARD",a="END:VCARD",o=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}();e.vCard={parse:t,generate:n}}("undefined"!=typeof window?window:module.exports);